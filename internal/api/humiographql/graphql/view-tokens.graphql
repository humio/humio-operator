fragment TokenDetails on Token {
    id
    name
    expireAt
    ipFilterV2 {
        id
    }
}

fragment ViewTokenDetails on Token {
    ...TokenDetails
    ... on ViewPermissionsToken {
    views {
        id
        name
    }
    permissions
}
}

query GetViewToken(
    $Id: String!
) {
    tokens(
        searchFilter: $Id
        sortBy: Name
        typeFilter: ViewPermissionToken
    ) {
        results {
            ...ViewTokenDetails
        }
    }
}

mutation CreateViewToken(
    $Name: String!
    $IPFilterId: String
    $ExpiresAt: Long
    $ViewIds: [String!]!
    $ViewPermissions: [Permission!]!
) {
    createViewPermissionsToken(
        input: {
            name: $Name
            expireAt: $ExpiresAt
            ipFilterId: $IPFilterId
            viewIds: $ViewIds
            permissions: $ViewPermissions
        }
    )
}

mutation UpdateViewToken(
    $Id: String!
    $ViewPermissions: [Permission!]!
) {
    updateViewPermissionsTokenPermissions
    (
        input: {
            id: $Id
            permissions: $ViewPermissions
        }
    )
}