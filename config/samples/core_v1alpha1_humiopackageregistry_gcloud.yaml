apiVersion: core.humio.com/v1alpha1
kind: HumioPackageRegistry
metadata:
  labels:
    app.kubernetes.io/name: humio-operator
    app.kubernetes.io/managed-by: kustomize
  name: humiopackageregistry-gcloud-sample
spec:
  managedClusterName: humiocluster
  displayName: "Google Cloud Artifact Registry"
  registryType: gcloud
  enabled: true
  gcloud:
    url: "https://artifactregistry.googleapis.com"
    projectId: "my-project"
    location: "us-central1"
    repository: "my-repo"
    serviceAccountKeyRef:
      name: gcloud-service-account-secret
      key: service-account.json
---
apiVersion: v1
kind: Secret
metadata:
  name: gcloud-service-account-secret
  labels:
    app.kubernetes.io/name: humio-operator
type: Opaque
stringData:
  service-account.json: |
    {
      "type": "service_account",
      "project_id": "my-project",
      "private_key_id": "key-id",
      "private_key": "-----BEGIN PRIVATE KEY-----\nYOUR_PRIVATE_KEY_HERE\n-----END PRIVATE KEY-----\n",
      "client_email": "service-account@my-project.iam.gserviceaccount.com",
      "client_id": "123456789012345678901",
      "auth_uri": "https://accounts.google.com/o/oauth2/auth",
      "token_uri": "https://oauth2.googleapis.com/token",
      "auth_provider_x509_cert_url": "https://www.googleapis.com/oauth2/v1/certs",
      "client_x509_cert_url": "https://www.googleapis.com/robot/v1/metadata/x509/service-account%40my-project.iam.gserviceaccount.com"
    }