---
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  annotations:
    controller-gen.kubebuilder.io/version: v0.14.0
  name: humioclusters.core.humio.com
spec:
  group: core.humio.com
  names:
    kind: HumioCluster
    listKind: HumioClusterList
    plural: humioclusters
    singular: humiocluster
  scope: Namespaced
  versions:
  - additionalPrinterColumns:
    - description: The state of the cluster
      jsonPath: .status.state
      name: State
      type: string
    - description: The number of nodes in the cluster
      jsonPath: .status.nodeCount
      name: Nodes
      type: string
    - description: The version of humio
      jsonPath: .status.version
      name: Version
      type: string
    name: v1alpha1
    schema:
      openAPIV3Schema:
        description: HumioCluster is the Schema for the humioclusters API.
        properties:
          apiVersion:
            description: |-
              APIVersion defines the versioned schema of this representation of an object.
              Servers should convert recognized schemas to the latest internal value, and
              may reject unrecognized values.
              More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources
            type: string
          kind:
            description: |-
              Kind is a string value representing the REST resource this object represents.
              Servers may infer this from the endpoint the client submits requests to.
              Cannot be updated.
              In CamelCase.
              More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds
            type: string
          metadata:
            type: object
          spec:
            description: HumioClusterSpec defines the desired state of HumioCluster.
            properties:
              affinity:
                $ref: '#/definitions/k8s.io~1api~1core~1v1~0Affinity'
                description: Affinity defines the affinity policies that will be attached
                  to the humio pods
              authServiceAccountName:
                description: |-
                  AuthServiceAccountName is no longer used as the auth sidecar container has been removed.
                  Deprecated: No longer used. The value will be ignored.
                type: string
              autoRebalancePartitions:
                description: |-
                  AutoRebalancePartitions will enable auto-rebalancing of both digest and storage partitions assigned to humio cluster nodes.
                  If all Kubernetes worker nodes are located in the same availability zone, you must set DisableInitContainer to true to use auto rebalancing of partitions.
                  Deprecated: No longer needed as of 1.89.0 as partitions and segment distribution is now automatically managed by LogScale itself.
                type: boolean
              commonEnvironmentVariables:
                description: |-
                  CommonEnvironmentVariables is the set of variables that will be applied to all nodes regardless of the node pool types.
                  See spec.nodePools[].environmentVariables to override or append variables for a node pool.
                  New installations should prefer setting this variable instead of spec.environmentVariables as the latter will be deprecated in the future.
                items:
                  $ref: '#/definitions/k8s.io~1api~1core~1v1~0EnvVar'
                type: array
              containerLivenessProbe:
                $ref: '#/definitions/k8s.io~1api~1core~1v1~0Probe'
                description: |-
                  ContainerLivenessProbe is the liveness probe applied to the Humio container
                  If specified and non-empty, the user-specified liveness probe will be used.
                  If specified and empty, the pod will be created without a liveness probe set.
                  Otherwise, use the built in default liveness probe configuration.
              containerReadinessProbe:
                $ref: '#/definitions/k8s.io~1api~1core~1v1~0Probe'
                description: |-
                  ContainerReadinessProbe is the readiness probe applied to the Humio container.
                  If specified and non-empty, the user-specified readiness probe will be used.
                  If specified and empty, the pod will be created without a readiness probe set.
                  Otherwise, use the built in default readiness probe configuration.
              containerSecurityContext:
                $ref: '#/definitions/k8s.io~1api~1core~1v1~0SecurityContext'
                description: ContainerSecurityContext is the security context applied
                  to the Humio container
              containerStartupProbe:
                $ref: '#/definitions/k8s.io~1api~1core~1v1~0Probe'
                description: |-
                  ContainerStartupProbe is the startup probe applied to the Humio container
                  If specified and non-empty, the user-specified startup probe will be used.
                  If specified and empty, the pod will be created without a startup probe set.
                  Otherwise, use the built in default startup probe configuration.
              dataVolumePersistentVolumeClaimPolicy:
                description: DataVolumePersistentVolumeClaimPolicy is a policy which
                  allows persistent volumes to be reclaimed
                properties:
                  reclaimType:
                    description: |-
                      ReclaimType is used to indicate what reclaim type should be used. This e.g. allows the user to specify if the
                      operator should automatically delete persistent volume claims if they are bound to Kubernetes worker nodes
                      that no longer exists. This can be useful in scenarios where PVC's represent a type of storage where the
                      lifecycle of the storage follows the one of the Kubernetes worker node.
                      When using persistent volume claims relying on network attached storage, this can be ignored.
                    enum:
                    - None
                    - OnNodeDelete
                    type: string
                type: object
              dataVolumePersistentVolumeClaimSpecTemplate:
                $ref: '#/definitions/k8s.io~1api~1core~1v1~0PersistentVolumeClaimSpec'
                description: DataVolumePersistentVolumeClaimSpecTemplate is the PersistentVolumeClaimSpec
                  that will be used with for the humio data volume. This conflicts
                  with DataVolumeSource.
              dataVolumeSource:
                $ref: '#/definitions/k8s.io~1api~1core~1v1~0VolumeSource'
                description: DataVolumeSource is the volume that is mounted on the
                  humio pods. This conflicts with DataVolumePersistentVolumeClaimSpecTemplate.
              digestPartitionsCount:
                description: DigestPartitionsCount is the desired number of digest
                  partitions
                type: integer
              disableInitContainer:
                default: false
                description: |-
                  DisableInitContainer is used to disable the init container completely which collects the availability zone from the Kubernetes worker node.
                  This is not recommended, unless you are using auto rebalancing partitions and are running in a single availability zone.
                type: boolean
              environmentVariables:
                description: |-
                  EnvironmentVariables is the set of variables that will be supplied to all Pods in the given node pool.
                  This set is merged with fallback environment variables (for defaults in case they are not supplied in the Custom Resource),
                  and spec.commonEnvironmentVariables (for variables that should be applied to Pods of all node types).
                  Precedence is given to more environment-specific variables, i.e. spec.environmentVariables
                  (or spec.nodePools[].environmentVariables) has higher precedence than spec.commonEnvironmentVariables.
                items:
                  $ref: '#/definitions/k8s.io~1api~1core~1v1~0EnvVar'
                type: array
              environmentVariablesSource:
                description: EnvironmentVariablesSource is the reference to an external
                  source of environment variables that will be merged with environmentVariables
                items:
                  $ref: '#/definitions/k8s.io~1api~1core~1v1~0EnvFromSource'
                type: array
              esHostname:
                description: ESHostname is the public hostname used by log shippers
                  with support for ES bulk API to access Humio
                type: string
              esHostnameSource:
                description: |-
                  ESHostnameSource is the reference to the public hostname used by log shippers with support for ES bulk API to
                  access Humio
                properties:
                  secretKeyRef:
                    $ref: '#/definitions/k8s.io~1api~1core~1v1~0SecretKeySelector'
                    description: SecretKeyRef contains the secret key reference when
                      an es hostname is pulled from a secret
                type: object
              extraHumioVolumeMounts:
                description: ExtraHumioVolumeMounts is the list of additional volume
                  mounts that will be added to the Humio container
                items:
                  $ref: '#/definitions/k8s.io~1api~1core~1v1~0VolumeMount'
                type: array
              extraKafkaConfigs:
                description: |-
                  ExtraKafkaConfigs is a multi-line string containing kafka properties.
                  Deprecated: This underlying LogScale environment variable used by this field has been marked deprecated as of
                  LogScale 1.173.0. Going forward, it is possible to provide additional Kafka configuration through a collection
                  of new environment variables. For more details, see the LogScale release notes.
                type: string
              extraVolumes:
                description: ExtraVolumes is the list of additional volumes that will
                  be added to the Humio pod
                items:
                  $ref: '#/definitions/k8s.io~1api~1core~1v1~0Volume'
                type: array
              featureFlags:
                description: FeatureFlags contains feature flags applied to this humio
                  cluster.
                properties:
                  enableDownscalingFeature:
                    default: false
                    description: |-
                      EnableDownscalingFeature (PREVIEW) is a feature flag for enabling the downscaling functionality of the humio operator for this humio cluster.
                      Default: false
                      Preview: this feature is in a preview state
                    type: boolean
                type: object
              helperImage:
                description: HelperImage is the desired helper container image, including
                  image tag
                type: string
              hostname:
                description: Hostname is the public hostname used by clients to access
                  Humio
                type: string
              hostnameSource:
                description: HostnameSource is the reference to the public hostname
                  used by clients to access Humio
                properties:
                  secretKeyRef:
                    $ref: '#/definitions/k8s.io~1api~1core~1v1~0SecretKeySelector'
                    description: SecretKeyRef contains the secret key reference when
                      a hostname is pulled from a secret
                type: object
              humioESServicePort:
                description: |-
                  HumioESServicePort is the port number of the Humio Service that is used to direct traffic to the ES interface of
                  the Humio pods.
                format: int32
                type: integer
              humioHeadlessServiceAnnotations:
                additionalProperties:
                  type: string
                description: |-
                  HumioHeadlessServiceAnnotations is the set of annotations added to the Kubernetes Headless Service that is used for
                  traffic between Humio pods
                type: object
              humioHeadlessServiceLabels:
                additionalProperties:
                  type: string
                description: |-
                  HumioHeadlessServiceLabels is the set of labels added to the Kubernetes Headless Service that is used for
                  traffic between Humio pods
                type: object
              humioServiceAccountAnnotations:
                additionalProperties:
                  type: string
                description: HumioServiceAccountAnnotations is the set of annotations
                  added to the Kubernetes Service Account that will be attached to
                  the Humio pods
                type: object
              humioServiceAccountName:
                description: HumioServiceAccountName is the name of the Kubernetes
                  Service Account that will be attached to the Humio pods
                type: string
              humioServiceAnnotations:
                additionalProperties:
                  type: string
                description: |-
                  HumioServiceAnnotations is the set of annotations added to the Kubernetes Service that is used to direct traffic
                  to the Humio pods
                type: object
              humioServiceLabels:
                additionalProperties:
                  type: string
                description: |-
                  HumioServiceLabels is the set of labels added to the Kubernetes Service that is used to direct traffic
                  to the Humio pods
                type: object
              humioServicePort:
                description: |-
                  HumioServicePort is the port number of the Humio Service that is used to direct traffic to the http interface of
                  the Humio pods.
                format: int32
                type: integer
              humioServiceType:
                $ref: '#/definitions/k8s.io~1api~1core~1v1~0ServiceType'
                description: HumioServiceType is the ServiceType of the Humio Service
                  that is used to direct traffic to the Humio pods
              idpCertificateSecretName:
                description: IdpCertificateSecretName is the name of the secret that
                  contains the IDP Certificate when using SAML authentication
                type: string
              image:
                description: |-
                  Image is the desired humio container image, including the image tag.
                  The value from ImageSource takes precedence over Image.
                type: string
              imagePullPolicy:
                $ref: '#/definitions/k8s.io~1api~1core~1v1~0PullPolicy'
                description: ImagePullPolicy sets the imagePullPolicy for all the
                  containers in the humio pod
              imagePullSecrets:
                description: ImagePullSecrets defines the imagepullsecrets for the
                  humio pods. These secrets are not created by the operator
                items:
                  $ref: '#/definitions/k8s.io~1api~1core~1v1~0LocalObjectReference'
                type: array
              imageSource:
                description: |-
                  ImageSource is the reference to an external source identifying the image.
                  The value from ImageSource takes precedence over Image.
                properties:
                  configMapRef:
                    $ref: '#/definitions/k8s.io~1api~1core~1v1~0ConfigMapKeySelector'
                    description: ConfigMapRef contains the reference to the configmap
                      name and key containing the image value
                type: object
              ingress:
                description: Ingress is used to set up ingress-related objects in
                  order to reach Humio externally from the kubernetes cluster
                properties:
                  annotations:
                    additionalProperties:
                      type: string
                    description: Annotations can be used to specify annotations appended
                      to the annotations set by the operator when creating ingress-related
                      objects
                    type: object
                  controller:
                    description: Controller is used to specify the controller used
                      for ingress in the Kubernetes cluster. For now, only nginx is
                      supported.
                    type: string
                  enabled:
                    default: false
                    description: |-
                      Enabled enables the logic for the Humio operator to create ingress-related objects. Requires one of the following
                      to be set: spec.hostname, spec.hostnameSource, spec.esHostname or spec.esHostnameSource
                    type: boolean
                  esSecretName:
                    description: ESSecretName is used to specify the Kubernetes secret
                      that contains the TLS certificate that should be used, specifically
                      for the ESHostname
                    type: string
                  secretName:
                    description: SecretName is used to specify the Kubernetes secret
                      that contains the TLS certificate that should be used
                    type: string
                  tls:
                    description: TLS is used to specify whether the ingress controller
                      will be using TLS for requests from external clients
                    type: boolean
                type: object
              initServiceAccountName:
                description: InitServiceAccountName is the name of the Kubernetes
                  Service Account that will be attached to the init container in the
                  humio pod.
                type: string
              license:
                description: License is the kubernetes secret reference which contains
                  the Humio license
                properties:
                  secretKeyRef:
                    $ref: '#/definitions/k8s.io~1api~1core~1v1~0SecretKeySelector'
                    description: SecretKeyRef specifies which key of a secret in the
                      namespace of the HumioCluster that holds the LogScale license
                      key
                type: object
              nodeCount:
                default: 0
                description: NodeCount is the desired number of humio cluster nodes
                type: integer
              nodePoolFeatures:
                description: NodePoolFeatures defines the features that are allowed
                  by the node pool
                properties:
                  allowedAPIRequestTypes:
                    description: |-
                      AllowedAPIRequestTypes is a list of API request types that are allowed by the node pool. Current options are:
                      OperatorInternal. Defaults to [OperatorInternal]. To disallow all API request types, set this to [].
                    items:
                      type: string
                    type: array
                type: object
              nodePools:
                description: NodePools can be used to define additional groups of
                  Humio cluster pods that share a set of configuration.
                items:
                  description: HumioNodePoolSpec is used to attach a name to an instance
                    of HumioNodeSpec
                  properties:
                    name:
                      description: |-
                        Name holds a name for this specific group of cluster pods. This name is used when constructing pod names, so it
                        is useful to use a name that reflects what the pods are configured to do.
                      minLength: 1
                      type: string
                    spec:
                      description: HumioNodeSpec contains a collection of various
                        configurations that are specific to a given group of LogScale
                        pods.
                      properties:
                        affinity:
                          $ref: '#/definitions/k8s.io~1api~1core~1v1~0Affinity'
                          description: Affinity defines the affinity policies that
                            will be attached to the humio pods
                        authServiceAccountName:
                          description: |-
                            AuthServiceAccountName is no longer used as the auth sidecar container has been removed.
                            Deprecated: No longer used. The value will be ignored.
                          type: string
                        containerLivenessProbe:
                          $ref: '#/definitions/k8s.io~1api~1core~1v1~0Probe'
                          description: |-
                            ContainerLivenessProbe is the liveness probe applied to the Humio container
                            If specified and non-empty, the user-specified liveness probe will be used.
                            If specified and empty, the pod will be created without a liveness probe set.
                            Otherwise, use the built in default liveness probe configuration.
                        containerReadinessProbe:
                          $ref: '#/definitions/k8s.io~1api~1core~1v1~0Probe'
                          description: |-
                            ContainerReadinessProbe is the readiness probe applied to the Humio container.
                            If specified and non-empty, the user-specified readiness probe will be used.
                            If specified and empty, the pod will be created without a readiness probe set.
                            Otherwise, use the built in default readiness probe configuration.
                        containerSecurityContext:
                          $ref: '#/definitions/k8s.io~1api~1core~1v1~0SecurityContext'
                          description: ContainerSecurityContext is the security context
                            applied to the Humio container
                        containerStartupProbe:
                          $ref: '#/definitions/k8s.io~1api~1core~1v1~0Probe'
                          description: |-
                            ContainerStartupProbe is the startup probe applied to the Humio container
                            If specified and non-empty, the user-specified startup probe will be used.
                            If specified and empty, the pod will be created without a startup probe set.
                            Otherwise, use the built in default startup probe configuration.
                        dataVolumePersistentVolumeClaimPolicy:
                          description: DataVolumePersistentVolumeClaimPolicy is a
                            policy which allows persistent volumes to be reclaimed
                          properties:
                            reclaimType:
                              description: |-
                                ReclaimType is used to indicate what reclaim type should be used. This e.g. allows the user to specify if the
                                operator should automatically delete persistent volume claims if they are bound to Kubernetes worker nodes
                                that no longer exists. This can be useful in scenarios where PVC's represent a type of storage where the
                                lifecycle of the storage follows the one of the Kubernetes worker node.
                                When using persistent volume claims relying on network attached storage, this can be ignored.
                              enum:
                              - None
                              - OnNodeDelete
                              type: string
                          type: object
                        dataVolumePersistentVolumeClaimSpecTemplate:
                          $ref: '#/definitions/k8s.io~1api~1core~1v1~0PersistentVolumeClaimSpec'
                          description: DataVolumePersistentVolumeClaimSpecTemplate
                            is the PersistentVolumeClaimSpec that will be used with
                            for the humio data volume. This conflicts with DataVolumeSource.
                        dataVolumeSource:
                          $ref: '#/definitions/k8s.io~1api~1core~1v1~0VolumeSource'
                          description: DataVolumeSource is the volume that is mounted
                            on the humio pods. This conflicts with DataVolumePersistentVolumeClaimSpecTemplate.
                        disableInitContainer:
                          default: false
                          description: |-
                            DisableInitContainer is used to disable the init container completely which collects the availability zone from the Kubernetes worker node.
                            This is not recommended, unless you are using auto rebalancing partitions and are running in a single availability zone.
                          type: boolean
                        environmentVariables:
                          description: |-
                            EnvironmentVariables is the set of variables that will be supplied to all Pods in the given node pool.
                            This set is merged with fallback environment variables (for defaults in case they are not supplied in the Custom Resource),
                            and spec.commonEnvironmentVariables (for variables that should be applied to Pods of all node types).
                            Precedence is given to more environment-specific variables, i.e. spec.environmentVariables
                            (or spec.nodePools[].environmentVariables) has higher precedence than spec.commonEnvironmentVariables.
                          items:
                            $ref: '#/definitions/k8s.io~1api~1core~1v1~0EnvVar'
                          type: array
                        environmentVariablesSource:
                          description: EnvironmentVariablesSource is the reference
                            to an external source of environment variables that will
                            be merged with environmentVariables
                          items:
                            $ref: '#/definitions/k8s.io~1api~1core~1v1~0EnvFromSource'
                          type: array
                        extraHumioVolumeMounts:
                          description: ExtraHumioVolumeMounts is the list of additional
                            volume mounts that will be added to the Humio container
                          items:
                            $ref: '#/definitions/k8s.io~1api~1core~1v1~0VolumeMount'
                          type: array
                        extraKafkaConfigs:
                          description: |-
                            ExtraKafkaConfigs is a multi-line string containing kafka properties.
                            Deprecated: This underlying LogScale environment variable used by this field has been marked deprecated as of
                            LogScale 1.173.0. Going forward, it is possible to provide additional Kafka configuration through a collection
                            of new environment variables. For more details, see the LogScale release notes.
                          type: string
                        extraVolumes:
                          description: ExtraVolumes is the list of additional volumes
                            that will be added to the Humio pod
                          items:
                            $ref: '#/definitions/k8s.io~1api~1core~1v1~0Volume'
                          type: array
                        helperImage:
                          description: HelperImage is the desired helper container
                            image, including image tag
                          type: string
                        humioESServicePort:
                          description: |-
                            HumioESServicePort is the port number of the Humio Service that is used to direct traffic to the ES interface of
                            the Humio pods.
                          format: int32
                          type: integer
                        humioServiceAccountAnnotations:
                          additionalProperties:
                            type: string
                          description: HumioServiceAccountAnnotations is the set of
                            annotations added to the Kubernetes Service Account that
                            will be attached to the Humio pods
                          type: object
                        humioServiceAccountName:
                          description: HumioServiceAccountName is the name of the
                            Kubernetes Service Account that will be attached to the
                            Humio pods
                          type: string
                        humioServiceAnnotations:
                          additionalProperties:
                            type: string
                          description: |-
                            HumioServiceAnnotations is the set of annotations added to the Kubernetes Service that is used to direct traffic
                            to the Humio pods
                          type: object
                        humioServiceLabels:
                          additionalProperties:
                            type: string
                          description: |-
                            HumioServiceLabels is the set of labels added to the Kubernetes Service that is used to direct traffic
                            to the Humio pods
                          type: object
                        humioServicePort:
                          description: |-
                            HumioServicePort is the port number of the Humio Service that is used to direct traffic to the http interface of
                            the Humio pods.
                          format: int32
                          type: integer
                        humioServiceType:
                          $ref: '#/definitions/k8s.io~1api~1core~1v1~0ServiceType'
                          description: HumioServiceType is the ServiceType of the
                            Humio Service that is used to direct traffic to the Humio
                            pods
                        image:
                          description: |-
                            Image is the desired humio container image, including the image tag.
                            The value from ImageSource takes precedence over Image.
                          type: string
                        imagePullPolicy:
                          $ref: '#/definitions/k8s.io~1api~1core~1v1~0PullPolicy'
                          description: ImagePullPolicy sets the imagePullPolicy for
                            all the containers in the humio pod
                        imagePullSecrets:
                          description: ImagePullSecrets defines the imagepullsecrets
                            for the humio pods. These secrets are not created by the
                            operator
                          items:
                            $ref: '#/definitions/k8s.io~1api~1core~1v1~0LocalObjectReference'
                          type: array
                        imageSource:
                          description: |-
                            ImageSource is the reference to an external source identifying the image.
                            The value from ImageSource takes precedence over Image.
                          properties:
                            configMapRef:
                              $ref: '#/definitions/k8s.io~1api~1core~1v1~0ConfigMapKeySelector'
                              description: ConfigMapRef contains the reference to
                                the configmap name and key containing the image value
                          type: object
                        initServiceAccountName:
                          description: InitServiceAccountName is the name of the Kubernetes
                            Service Account that will be attached to the init container
                            in the humio pod.
                          type: string
                        nodeCount:
                          default: 0
                          description: NodeCount is the desired number of humio cluster
                            nodes
                          type: integer
                        nodePoolFeatures:
                          description: NodePoolFeatures defines the features that
                            are allowed by the node pool
                          properties:
                            allowedAPIRequestTypes:
                              description: |-
                                AllowedAPIRequestTypes is a list of API request types that are allowed by the node pool. Current options are:
                                OperatorInternal. Defaults to [OperatorInternal]. To disallow all API request types, set this to [].
                              items:
                                type: string
                              type: array
                          type: object
                        nodeUUIDPrefix:
                          description: |-
                            NodeUUIDPrefix is the prefix for the Humio Node's UUID. By default this does not include the zone. If it's
                            necessary to include zone, there is a special `Zone` variable that can be used. To use this, set `{{.Zone}}`. For
                            compatibility with pre-0.0.14 spec defaults, this should be set to `humio_{{.Zone}}`
                            Deprecated: LogScale 1.70.0 deprecated this option, and was later removed in LogScale 1.80.0
                          type: string
                        podAnnotations:
                          additionalProperties:
                            type: string
                          description: PodAnnotations can be used to specify annotations
                            that will be added to the Humio pods
                          type: object
                        podDisruptionBudget:
                          description: PodDisruptionBudget defines the PDB configuration
                            for this node spec
                          properties:
                            enabled:
                              description: Enabled indicates whether PodDisruptionBudget
                                is enabled for this NodePool.
                              type: boolean
                            maxUnavailable:
                              anyOf:
                              - type: integer
                              - type: string
                              description: MaxUnavailable is the maximum number of
                                pods that can be unavailable during a disruption.
                              format: int-or-string
                              type: string
                              x-kubernetes-int-or-string: true
                            minAvailable:
                              anyOf:
                              - type: integer
                              - type: string
                              description: MinAvailable is the minimum number of pods
                                that must be available during a disruption.
                              format: int-or-string
                              type: string
                              x-kubernetes-int-or-string: true
                            unhealthyPodEvictionPolicy:
                              description: |-
                                UnhealthyPodEvictionPolicy defines the policy for evicting unhealthy pods.
                                Requires Kubernetes 1.26+.
                              enum:
                              - IfHealthyBudget
                              - AlwaysAllow
                              type: string
                          type: object
                        podLabels:
                          additionalProperties:
                            type: string
                          description: PodLabels can be used to specify labels that
                            will be added to the Humio pods
                          type: object
                        podSecurityContext:
                          $ref: '#/definitions/k8s.io~1api~1core~1v1~0PodSecurityContext'
                          description: PodSecurityContext is the security context
                            applied to the Humio pod
                        priorityClassName:
                          default: ""
                          description: PriorityClassName is the name of the priority
                            class that will be used by the Humio pods
                          type: string
                        resources:
                          $ref: '#/definitions/k8s.io~1api~1core~1v1~0ResourceRequirements'
                          description: Resources is the kubernetes resource limits
                            for the humio pod
                        shareProcessNamespace:
                          description: |-
                            ShareProcessNamespace can be useful in combination with SidecarContainers to be able to inspect the main Humio
                            process. This should not be enabled, unless you need this for debugging purposes.
                            https://kubernetes.io/docs/tasks/configure-pod-container/share-process-namespace/
                          type: boolean
                        sidecarContainer:
                          description: |-
                            SidecarContainers can be used in advanced use-cases where you want one or more sidecar container added to the
                            Humio pod to help out in debugging purposes.
                          items:
                            $ref: '#/definitions/k8s.io~1api~1core~1v1~0Container'
                          type: array
                        terminationGracePeriodSeconds:
                          description: |-
                            TerminationGracePeriodSeconds defines the amount of time to allow cluster pods to gracefully terminate
                            before being forcefully restarted. If using bucket storage, this should allow enough time for Humio to finish
                            uploading data to bucket storage.
                          format: int64
                          type: integer
                        tolerations:
                          description: Tolerations defines the tolerations that will
                            be attached to the humio pods
                          items:
                            $ref: '#/definitions/k8s.io~1api~1core~1v1~0Toleration'
                          type: array
                        topologySpreadConstraints:
                          description: TopologySpreadConstraints defines the topologySpreadConstraints
                            that will be attached to the humio pods
                          items:
                            $ref: '#/definitions/k8s.io~1api~1core~1v1~0TopologySpreadConstraint'
                          type: array
                        updateStrategy:
                          description: |-
                            UpdateStrategy controls how Humio pods are updated when changes are made to the HumioCluster resource that results
                            in a change to the Humio pods
                          properties:
                            enableZoneAwareness:
                              description: |-
                                EnableZoneAwareness toggles zone awareness on or off during updates. When enabled, the pod replacement logic
                                will go through all pods in a specific zone before it starts replacing pods in the next zone.
                                If pods are failing, they bypass the zone limitation and are restarted immediately - ignoring the zone.
                                Zone awareness is enabled by default.
                              type: boolean
                            maxUnavailable:
                              anyOf:
                              - type: integer
                              - type: string
                              default: 1
                              description: |-
                                MaxUnavailable is the maximum number of pods that can be unavailable during a rolling update.
                                This can be configured to an absolute number or a percentage, e.g. "maxUnavailable: 5" or "maxUnavailable: 25%".
                              x-kubernetes-int-or-string: true
                            minReadySeconds:
                              description: MinReadySeconds is the minimum time in
                                seconds that a pod must be ready before the next pod
                                can be deleted when doing rolling update.
                              format: int32
                              type: integer
                            type:
                              description: |-
                                Type controls how Humio pods are updated  when changes are made to the HumioCluster resource that results
                                in a change to the Humio pods. The available values are: OnDelete, RollingUpdate, ReplaceAllOnUpdate, and
                                RollingUpdateBestEffort.


                                When set to OnDelete, no Humio pods will be terminated but new pods will be created with the new spec. Replacing
                                existing pods will require each pod to be deleted by the user.


                                When set to RollingUpdate, pods will always be replaced one pod at a time. There may be some Humio updates where
                                rolling updates are not supported, so it is not recommended to have this set all the time.


                                When set to ReplaceAllOnUpdate, all Humio pods will be replaced at the same time during an update.
                                This is the default behavior.


                                When set to RollingUpdateBestEffort, the operator will evaluate the Humio version change and determine if the
                                Humio pods can be updated in a rolling fashion or if they must be replaced at the same time.
                              enum:
                              - OnDelete
                              - RollingUpdate
                              - ReplaceAllOnUpdate
                              - RollingUpdateBestEffort
                              type: string
                          type: object
                      type: object
                  required:
                  - name
                  type: object
                type: array
              nodeUUIDPrefix:
                description: |-
                  NodeUUIDPrefix is the prefix for the Humio Node's UUID. By default this does not include the zone. If it's
                  necessary to include zone, there is a special `Zone` variable that can be used. To use this, set `{{.Zone}}`. For
                  compatibility with pre-0.0.14 spec defaults, this should be set to `humio_{{.Zone}}`
                  Deprecated: LogScale 1.70.0 deprecated this option, and was later removed in LogScale 1.80.0
                type: string
              path:
                description: Path is the root URI path of the Humio cluster
                type: string
              podAnnotations:
                additionalProperties:
                  type: string
                description: PodAnnotations can be used to specify annotations that
                  will be added to the Humio pods
                type: object
              podDisruptionBudget:
                description: PodDisruptionBudget defines the PDB configuration for
                  this node spec
                properties:
                  enabled:
                    description: Enabled indicates whether PodDisruptionBudget is
                      enabled for this NodePool.
                    type: boolean
                  maxUnavailable:
                    anyOf:
                    - type: integer
                    - type: string
                    description: MaxUnavailable is the maximum number of pods that
                      can be unavailable during a disruption.
                    format: int-or-string
                    type: string
                    x-kubernetes-int-or-string: true
                  minAvailable:
                    anyOf:
                    - type: integer
                    - type: string
                    description: MinAvailable is the minimum number of pods that must
                      be available during a disruption.
                    format: int-or-string
                    type: string
                    x-kubernetes-int-or-string: true
                  unhealthyPodEvictionPolicy:
                    description: |-
                      UnhealthyPodEvictionPolicy defines the policy for evicting unhealthy pods.
                      Requires Kubernetes 1.26+.
                    enum:
                    - IfHealthyBudget
                    - AlwaysAllow
                    type: string
                type: object
              podLabels:
                additionalProperties:
                  type: string
                description: PodLabels can be used to specify labels that will be
                  added to the Humio pods
                type: object
              podSecurityContext:
                $ref: '#/definitions/k8s.io~1api~1core~1v1~0PodSecurityContext'
                description: PodSecurityContext is the security context applied to
                  the Humio pod
              priorityClassName:
                default: ""
                description: PriorityClassName is the name of the priority class that
                  will be used by the Humio pods
                type: string
              resources:
                $ref: '#/definitions/k8s.io~1api~1core~1v1~0ResourceRequirements'
                description: Resources is the kubernetes resource limits for the humio
                  pod
              rolePermissions:
                description: RolePermissions is a multi-line string containing role-permissions.json
                type: string
              shareProcessNamespace:
                description: |-
                  ShareProcessNamespace can be useful in combination with SidecarContainers to be able to inspect the main Humio
                  process. This should not be enabled, unless you need this for debugging purposes.
                  https://kubernetes.io/docs/tasks/configure-pod-container/share-process-namespace/
                type: boolean
              sidecarContainer:
                description: |-
                  SidecarContainers can be used in advanced use-cases where you want one or more sidecar container added to the
                  Humio pod to help out in debugging purposes.
                items:
                  $ref: '#/definitions/k8s.io~1api~1core~1v1~0Container'
                type: array
              storagePartitionsCount:
                description: |-
                  StoragePartitionsCount is the desired number of storage partitions
                  Deprecated: No longer needed as LogScale now automatically redistributes segments
                type: integer
              targetReplicationFactor:
                description: TargetReplicationFactor is the desired number of replicas
                  of both storage and ingest partitions
                type: integer
              terminationGracePeriodSeconds:
                description: |-
                  TerminationGracePeriodSeconds defines the amount of time to allow cluster pods to gracefully terminate
                  before being forcefully restarted. If using bucket storage, this should allow enough time for Humio to finish
                  uploading data to bucket storage.
                format: int64
                type: integer
              tls:
                description: TLS is used to define TLS specific configuration such
                  as intra-cluster TLS settings
                properties:
                  caSecretName:
                    description: CASecretName is used to point to a Kubernetes secret
                      that holds the CA that will be used to issue intra-cluster TLS
                      certificates
                    type: string
                  enabled:
                    description: Enabled can be used to toggle TLS on/off. Default
                      behaviour is to configure TLS if cert-manager is present, otherwise
                      we skip TLS.
                    type: boolean
                  extraHostnames:
                    description: ExtraHostnames holds a list of additional hostnames
                      that will be appended to TLS certificates.
                    items:
                      type: string
                    type: array
                type: object
              tolerations:
                description: Tolerations defines the tolerations that will be attached
                  to the humio pods
                items:
                  $ref: '#/definitions/k8s.io~1api~1core~1v1~0Toleration'
                type: array
              topologySpreadConstraints:
                description: TopologySpreadConstraints defines the topologySpreadConstraints
                  that will be attached to the humio pods
                items:
                  $ref: '#/definitions/k8s.io~1api~1core~1v1~0TopologySpreadConstraint'
                type: array
              updateStrategy:
                description: |-
                  UpdateStrategy controls how Humio pods are updated when changes are made to the HumioCluster resource that results
                  in a change to the Humio pods
                properties:
                  enableZoneAwareness:
                    description: |-
                      EnableZoneAwareness toggles zone awareness on or off during updates. When enabled, the pod replacement logic
                      will go through all pods in a specific zone before it starts replacing pods in the next zone.
                      If pods are failing, they bypass the zone limitation and are restarted immediately - ignoring the zone.
                      Zone awareness is enabled by default.
                    type: boolean
                  maxUnavailable:
                    anyOf:
                    - type: integer
                    - type: string
                    default: 1
                    description: |-
                      MaxUnavailable is the maximum number of pods that can be unavailable during a rolling update.
                      This can be configured to an absolute number or a percentage, e.g. "maxUnavailable: 5" or "maxUnavailable: 25%".
                    x-kubernetes-int-or-string: true
                  minReadySeconds:
                    description: MinReadySeconds is the minimum time in seconds that
                      a pod must be ready before the next pod can be deleted when
                      doing rolling update.
                    format: int32
                    type: integer
                  type:
                    description: |-
                      Type controls how Humio pods are updated  when changes are made to the HumioCluster resource that results
                      in a change to the Humio pods. The available values are: OnDelete, RollingUpdate, ReplaceAllOnUpdate, and
                      RollingUpdateBestEffort.


                      When set to OnDelete, no Humio pods will be terminated but new pods will be created with the new spec. Replacing
                      existing pods will require each pod to be deleted by the user.


                      When set to RollingUpdate, pods will always be replaced one pod at a time. There may be some Humio updates where
                      rolling updates are not supported, so it is not recommended to have this set all the time.


                      When set to ReplaceAllOnUpdate, all Humio pods will be replaced at the same time during an update.
                      This is the default behavior.


                      When set to RollingUpdateBestEffort, the operator will evaluate the Humio version change and determine if the
                      Humio pods can be updated in a rolling fashion or if they must be replaced at the same time.
                    enum:
                    - OnDelete
                    - RollingUpdate
                    - ReplaceAllOnUpdate
                    - RollingUpdateBestEffort
                    type: string
                type: object
              viewGroupPermissions:
                description: |-
                  ViewGroupPermissions is a multi-line string containing view-group-permissions.json.
                  Deprecated: Use RolePermissions instead.
                type: string
            required:
            - license
            type: object
          status:
            description: HumioClusterStatus defines the observed state of HumioCluster.
            properties:
              evictedNodeIds:
                description: EvictedNodeIds keeps track of evicted nodes for use within
                  the downscaling functionality
                items:
                  type: integer
                type: array
              licenseStatus:
                description: LicenseStatus shows the status of the Humio license attached
                  to the cluster
                properties:
                  expiration:
                    description: Expiration contains the timestamp of when the currently
                      installed license expires.
                    type: string
                  type:
                    description: Type holds the type of license that is currently
                      installed on the HumioCluster
                    type: string
                type: object
              message:
                description: Message contains additional information about the state
                  of the cluster
                type: string
              nodeCount:
                description: NodeCount is the number of nodes of humio running
                type: integer
              nodePoolStatus:
                description: NodePoolStatus shows the status of each node pool
                items:
                  description: HumioNodePoolStatus shows the status of each node pool
                  properties:
                    desiredBootstrapTokenHash:
                      description: DesiredBootstrapTokenHash holds a SHA256 of the
                        value set in environment variable BOOTSTRAP_ROOT_TOKEN_HASHED
                      type: string
                    desiredPodHash:
                      description: DesiredPodHash holds a hashed representation of
                        the pod spec
                      type: string
                    desiredPodRevision:
                      description: DesiredPodRevision holds the desired pod revision
                        for pods of the given node pool.
                      type: integer
                    name:
                      description: Name is the name of the node pool
                      minLength: 1
                      type: string
                    state:
                      description: State will be empty before the cluster is bootstrapped.
                        From there it can be "Running", "Upgrading", "Restarting"
                        or "Pending"
                      type: string
                    zoneUnderMaintenance:
                      description: ZoneUnderMaintenance holds the name of the availability
                        zone currently under maintenance
                      type: string
                  required:
                  - name
                  type: object
                type: array
              observedGeneration:
                description: ObservedGeneration shows the generation of the HumioCluster
                  which was last observed
                type: string
              podStatus:
                description: PodStatus shows the status of individual humio pods
                items:
                  description: HumioPodStatus shows the status of individual humio
                    pods
                  properties:
                    nodeId:
                      description: |-
                        NodeId used to refer to the value of the BOOTSTRAP_HOST_ID environment variable for a Humio instance.
                        Deprecated: No longer being used.
                      type: integer
                    nodeName:
                      description: NodeName is the name of the Kubernetes worker node
                        where this pod is currently running
                      type: string
                    podName:
                      description: PodName holds the name of the pod that this is
                        the status for.
                      type: string
                    pvcName:
                      description: PvcName is the name of the persistent volume claim
                        that is mounted in to the pod
                      type: string
                  type: object
                type: array
              state:
                description: State will be empty before the cluster is bootstrapped.
                  From there it can be "Running", "Upgrading", "Restarting" or "Pending"
                type: string
              version:
                description: Version is the version of humio running
                type: string
            type: object
        type: object
    served: true
    storage: true
    subresources:
      status: {}
